<!DOCTYPE html>
<html lang="en-US" style="height:100%;">
<head>
	
	<title>DCCS</title>
	<meta name="keywords" content="" />
	<meta name="description" content=""/>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">

	<link href="css/bootstrap.min.css" rel="stylesheet" type="text/css">

	<link href="css/dccs_style.css" rel="stylesheet" type="text/css">
</head>
<body>
<div id="header">
	 <h1>Dynamic Climate Change Simulator</h1>
		          <!--<ul class="nav nav-pills"> 
                    <li> <a href = "dccs.html" >HOME</a> </li>
                    <li> <a href = "contact.html" >CONTACT US</a> </li>
                    <li> <a href = "about.html" >ABOUT</a> </li>
                  </ul> -->           
</div>	
	<div id = "left-body">
	<!--<link rel="stylesheet" href="jquery-ui.css">-->
        
		<script type="text/javascript" src="jquery-1.11.1.min.js"></script>
    
	<!--<script src="jquery-ui.js"></script>-->
     
  <!--<script type="text/javascript" src="highcharts.js"></script>-->
  </br>
  </br>

    <table>
    <tr> 
    <td><label for="Year">Year:</label></td>
        <td></td>
   <td> <label  class="form-control" style="width: 90px;background-color:yellow" class="form-control" id="year1" name="year1" for="year1">2000</label></td>
        <td></td>
        <td> <label for="Year">of</label></td>
        <td></td>
        <td> <label  class="form-control" style="width: 90px;background-color:yellow" class="form-control" id="year2" name="year2" for="year2">2100</label></td>
        
    </tr>    
    </table>    
<!--div id="graph1"  style="width: 400px; height: 300px; margin-top:230px;"></div>-->
</br>
</br>

    <table style= "margin-left:130px">
        <tr>
            <td><label for="Goal" style="color:red">Next Goal:</label></td>
            <td></td>
            <td> <label  class="form-control" style="width: 90px;background-color:yellow" class="form-control" id="goal" name="goal" for="goal">765</label></td>
        </tr>        
    </table>
</br>
</br>
</br>

   <!--<table>
       <tr>
           <td><label for="Total Conc. of CO2(GtC/Year)" >Total Conc. of CO<sub>2</sub>(GtC/Year):</label></td>
            <td></td>       
            <td><input type="text" style="width: 70px; color:red" id ="totalCarbon" class="form-control" value="677.0" readonly></td>
        </tr>
    </table>-->

</div>
	
    	<div id = "mid-body">
       
        
 </br>

   <!--<table>
        <tr>
            <td><label for="Goal" style="color:red">Goal:</label></td>
            <td></td>
            <td><input type="text" style="width: 70px;float:left;background-color:yellow" class="form-control" id="goal" value="680 GtC" name="goal" readonly></td>
        </tr>        
    </table>-->
    <div id="chart-container" style="float:left;width:350px;height:300px;"></div>


  
    <div id="therm-container" style="float:left;width:175px; height:270px; margin:0">
      
      

    </div>

    
   

	
	</div>
	
	
	<div id = "right-body">
</br>
</br>
<table>
    <tr>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td><b>From:</b></td>
        <td></td>
        <td></td>
        <td><b>To:</b></td>
    </tr>
    <tr>
        <td style="color:red"><b>Total Emission(GtC/Year)</b></td>
     <td><input type="text" style="width: 60px" id="emission_field" class="form-control" value="" name="textWeight1" placeholder="Enter" required></td>
     <td></td>
    <td></td>
    <td> <label  class="form-control" style="width: 60px;background-color:yellow"  for="emission_field_from">0.00</label></td> 
    <!--<td><input type="text" style="width: 60px;background-color:yellow" class="form-control" id="emission_field_from" value="0.00" name="textWeight2" readonly></td>-->
    <td></td>
    <td></td>
    <td> <label  class="form-control" style="width: 60px;background-color:yellow"  for="emission_field_to">16.00</label></td> 
   <!--<td><input type="text" style="width: 60px;background-color:yellow" class="form-control" id="emission_field_to" value="16.00" name="textWeight3"readonly></td>--> 
      
    </tr>
    <tr>
        <td style="color:green"><b>Absorption(GtC/Year)</b></td>
        <td><input type="text" style="width: 60px" id="absorption_field" value="" class="form-control" name="textWeight4" placeholder="Enter" required></td>
        <td></td>
        <td></td>
        <td> <label  class="form-control" style="width: 60px;background-color:yellow"  for="absorption_field_from">0.00</label></td>
        <!--<td><input type="text" style="width: 60px;background-color:yellow" class="form-control" id="absorption_field_from" value="0.00" name="textWeight5" readonly></td>-->
         <td></td>
        <td></td>
         <td> <label  class="form-control" style="width:60px ;background-color:yellow"  for="absorption_field_to">16.00</label></td>
        <!--<td><input type="text" style="width: 60px;background-color:yellow" class="form-control" id="absorption_field_to" value="16.00" name="textWeight6" readonly></td>-->   
    </tr>
</table>
</br>
</br>
</br>
     
    <button id="button" style="background-color:rgba(0, 108, 255, 0.4)" align="right" type="button" class="btn btn-primary">Make Decision</button>



    <script type="text/javascript" src="highcharts.js"></script>
<script type="text/javascript" src="js/fusioncharts.js"></script>
<script type="text/javascript" src="js/themes/fusioncharts.theme.fint.js"></script>

	<script type="text/javascript">
    

   $(function(){
         $('#graph1').highcharts({
        chart: {
            type: 'spline',
            animation:Highcharts.svg,
             useHTML: true,
        },
        title: {
             useHTML: true,
            text: 'Emission and Absorption of CO<sub>2</sub>',
            },
        xAxis: {
                    min:1900,
                    max:2100,    
        title: {
                text: 'Year'
            }
         },
        yAxis: {
            min:0.00,
            max:16.00,
             tickInterval:4,
              lineWidth: 1,
            title: {
                useHTML: true,
                text: 'CO<sub>2</sub>(GtC/Year)'}
            //min: 0
           
        },
        tooltip: {
       },
        plotOptions: {
            spline: {
                marker: {
                    enabled: false,
                }
            }
        },
          series: [{
           allowHTML: true,
            name: 'Emission of CO<sub>2</sub>',
        
                data:[]
          },
            {
              allowHTML: true,                   
            name: 'Absorption of CO<sub>2</sub>',
       
                data: []
            }] 
         });
       $('#graph2').highcharts({
        chart: {
            type: 'spline',
            animation:Highcharts.svg,
        },
        title: {
            useHTML: true,
            text: 'Total Concentration of CO<sub>2</sub>'
        },
        xAxis: {
                    min:1900,
                    max:2100,
                    title: {
                      text: 'Year'
                    }
         },
        yAxis: {
               min:0.00,
               max:1000,
               tickInterval:200,
               lineWidth: 1,
            
            title: {
                useHTML: true,
                text: 'CO<sub>2</sub>(GtC/Year)'
            }
            //min: 0
          },
        tooltip: {
            //headerFormat: '<b>{series.name}</b><br>',
            //pointFormat: '{point.x: %b}: {point.y:.2f} '
        },

        plotOptions: {
            spline: {
                marker: {
                    enabled: false,
                }
            }
        },
          
        series: [{
            useHTML: true,
            name: 'Total Cocncentration of CO<sub>2</sub>',
      
                data: []

   
                },
                {
            allowHTML: true,                   
            name: 'Next Year goal curve',
            color:'red',
            dashStyle: 'longdash',
       
                data: []
            }] 
    
        });

        var cylinder = new FusionCharts({
        "type": "cylinder",
        "renderAt": "chart-container",
        "width": "350",
        "height": "300",
        "dataFormat": "json",
            "dataSource": {
                   "chart": {
       "gaugeFillColor":"#666666",
       //"tickValueStep":"5",
      "majorTMNumber": "15",
      "minorTMNumber": "5",
      "tickValueStep": "2",               
      "theme": "fint",
      "caption": "Carbon dioxide Bath-Tub",
      "subcaption": "",
      "lowerLimit": "0",
      "upperLimit": "1000",
      "lowerLimitDisplay": "Empty",
      "upperLimitDisplay": "Full",
      "numberSuffix": " GtC",
      "baseFontSize" : "20",
      "showValue": "1",
      "chartBottomMargin": "10",
      "outCnvBaseFontSize" : "10",

      "basefontcolor":"#0066FF",
      

        "bgAlpha":"1",
        // "value": "677",              
        },
       
                "value": "762"
            }
      });
    cylinder.render();
       
       
       var thermometer = new FusionCharts({
        "type": "thermometer",
        "renderAt": "therm-container",
        "width": "175",
        "height": "270",
        "dataFormat": "json",
            "dataSource": {
                   "chart": {
                          "caption": "Temperature Monitor",
                          "subcaption": "",
                          "lowerLimit": "0",
                          "upperLimit": "50",
                          "numberSuffix": "Â°C",
                          "decimals": "1",
                          "showhovereffect": "1",
                          "gaugeFillColor": "rgba(136, 218, 248, 0.13)",
                          "thmOriginX": "100",
                          "theme": "fint",
                          "chartBottomMargin": "20",
                          "majorTMNumber": "6",
                          "majorTMHeight": "12",
                          "minorTMNumber": "4",
                          "minorTMHeight": "7",
                          "majorTMColor": "#666666",
                          "majorTMAlpha": "100",
                          "majorTMThickness": "2",
                          "minorTMColor": "#666666",
                          "minorTMAlpha": "50",
                          "basefontcolor" : "#FF9900",
                        
                          "minorTMThickness": "2"
                        },
                "value":"25"
                }
      });
       thermometer.render();
       
       
      
var emission = [1.2609,1.3448,1.3628,1.4429,1.4764,1.5415,1.6165,1.7026,1.6779,1.7203,1.76,1.6131,1.631,
1.6548,1.6597,1.6941,1.6961,1.7189,1.7252,1.7374,1.7408,1.7532,1.7589,1.7778,1.8206,1.8257,1.827,1.8406,
1.8535,1.8883,1.9407,1.9687,1.9717,1.978,2.0444,2.052,2.0541,2.0711,2.085,2.0925,2.1083,2.1865,2.2042,
2.2149,2.2333,2.2753,2.2774,2.4009,2.4439,2.4848,2.6673,3.0263,3.0807,3.1219,3.2,3.4225,3.6169,3.7391,
3.8508,3.8598,3.9628,4.0579,4.16,4.3229,4.4951,4.65,4.8443,4.9568,5.0657,5.2831,5.5157,5.5227,5.6632,
5.8601,5.8837,5.8985,6.1949,6.3441,6.4169,6.4314,6.5719,6.59,6.6229,6.6708,6.8501,7.0272,7.2111,7.3641,
7.6025,7.736,7.7488,7.752,7.8077,7.8535,7.9616,7.9645,8.0222,8.0563,8.0782,8.1243,8.1549];

 var year_array = [1903,1905,1909,1915,1921,1927,1935,1943,1953,1958,1959,1960,1961,1962,1963,1964,1965,1966,1967,1968,1969,1970,1971,1972,1973,1974,1975,1976,1977,1978,1979,1980,1981,1982,1983,1984,1985,1986,1987,1988,1989,1990,1991,1992,1993,1994,1995,1996,1997,1998,1999];

var total_carbon_dioxide = [614,618,623,626,628,636,639,641,651,656,657,661,662,663,663,664,665,668,669,671,673,676,677,679,682,684,686,689,692,695,698,702,705,707,711,714,716,719,723,727,730,733,736,738,740,743,746,750,752,758,762];


var goal_next = [765,769,773,777,780,784,787,791,794,798,801,804,808,811,814,817,820,823,826,829,832,834,837,840,842,845,848,850,853,855,857,860,862,864,867,869,871,873,875,877,879,881,883,885,887,889,890,892,894,896,897,899,900,902,903,905,906,908,909,910,912,913,914,915,916,917,919,920,921,922,923,923,924,925,926,927,927,928,929,930,930,931,931,932,932,933,933,934,934,934,935,935,935,935,936,936,936,936,936,936,936];

 
 var chart1 = $('#graph1').highcharts();
  var chart2 = $('#graph2').highcharts();


 
    var k=0;
    var j=0; 
    var xVal = 1900;
    var temp_initial=0;
    var temp_final=0; 
    var goal_year=2000; 
    while(xVal<2000)
    {

		    chart1.series[0].addPoint([xVal++,emission[k++]]);
        chart2.series[1].addPoint([goal_year++,goal_next[j++]])
    }
     

     var count =0;
     while(count<51)
     {

       chart2.series[0].addPoint([year_array[count],total_carbon_dioxide[count]]);
       
       count++;

     }

     
    chart1.series[1].addPoint([1999,4.07]);

    
    
    var j = 0;
    var totalCarbonDioxideConc = 762;

    var num_count = 0; 


    $(document).ready(function(){
    $('#absorption_field').keypress(function(e){
      if(e.keyCode==13)
      $('#button').click();
    });
});




    $(document).ready(function(){   
    $('#button').click(function () {
  


      
        var chart1 = $('#graph1').highcharts();
        //chart1.xAxis.setExtremes(2015,2050);
        //var choosed_fossile_emission = document.getElementById("");
        //var choosed_def_emission = 5;

        //var yVal = choosed_fossile_emission + choosed_def_emission;
        //var updateInterval = 1000;

         
         if(xVal==2101){
          document.location=("http://localhost/cstask/instruction.html");

          alert("Thanks for playing the game. Now You will be redirected to carbon stabilization task");


          return false ;} 

         if(isNaN(document.getElementById("emission_field").value)|| isNaN(document.getElementById("absorption_field").value))
         {
            alert("Please Enter numerical Values");
           return false;
         }
        
        if(document.getElementById("emission_field").value=="" || document.getElementById("absorption_field").value== ""){
            alert("Please Enter Values");
           return false;}
        if(document.getElementById("emission_field").value>16.00 || document.getElementById("absorption_field").value>16.00)       {
            alert("Please Enter Values in the given range");
           return false;}
        
        if(document.getElementById("emission_field").value<=0.0 || document.getElementById("absorption_field").value<=0.0){
            alert("Please Enter Values in the given range");
           return false;}
          
 
       
        var emission_value = parseFloat(document.getElementById("emission_field").value);
       
        var absorption_value =parseFloat(document.getElementById("absorption_field").value);
        
        totalCarbonDioxideConc = parseFloat(totalCarbonDioxideConc + emission_value - absorption_value);
        
        //document.getElementById("totalCarbon").value = totalCarbonDioxideConc;
        cylinder.setData(totalCarbonDioxideConc);
        var tempvar = parseFloat(totalCarbonDioxideConc/677.0);
        //alert(tempvar);
        var change = parseFloat(2.303*0.87*5.53*(Math.log(tempvar)));

        
        
        //alert(change);
        var temperature= parseFloat(25+change);
        if(xVal==2000){temp_initial=temperature;}
        if(xVal==2100){temp_final=temperature;}

        thermometer.setData(temperature);
        chart1.series[0].addPoint([xVal,emission_value]);
        chart1.series[1].addPoint([xVal,absorption_value]);


       // xVal+=1;
     
        var chart2 = $('#graph2').highcharts();
      

        chart2.series[0].addPoint([xVal,totalCarbonDioxideConc]);
         document.getElementById("year1").innerHTML=xVal;

         if(xVal==2100 && 1.5<=temp_final-temp_initial<=1.7)
         {
          document.getElementById("info-box").innerHTML="Emission reduced by 40-70% by 2050";
        }

        if(xVal==2100 && 2.3<=temp_final-temp_initial<=2.8)
         {
          document.getElementById("info-box").innerHTML="Delivered on current pledge to reduce emission";
        }
        

         if(xVal==2100 && 3.1<=temp_final-temp_initial<=3.7)
         {
          document.getElementById("info-box").innerHTML="No effort made to reduce emission";
        }    

        if(xVal==2100 && 4.1<=temp_final-temp_initial<=4.8)
         {
          document.getElementById("info-box").innerHTML="No effort made to reduce emission, they keep going at the present rate";
        }

       
         document.getElementById("goal").innerHTML = parseFloat(goal_next[++j]);
         var goal = parseFloat(goal_next[j]);


        
    
    $.ajax({
    type:"POST",
    url:"dccs_data.php",
    
    data:"emission_value="+emission_value+"&xVal="+xVal+"&goal="+goal+"&absorption_value="+absorption_value+"&totalCarbonDioxideConc="+totalCarbonDioxideConc+"&temperature="+temperature,
   // dataType: "dataString",
    success:function(){
             }
    }); 
         xVal+=1;
       
        document.getElementById("emission_field").value='';
        document.getElementById("absorption_field").value='';
        $("#emission_field").focus();
        
      
        });
        });
        
   });
  



</script>
</br>




	</div>

 
<label  class="form-control" style="width: 200px;height:80px;margin-left:700px;color:green;margin-top:310px;margin-right:400px;border:2px solid grey" id="info-box" for="info">Feedback on increment of temperature by 2100 </label>
   
<div id="graph1" style="float:left; width: 50%; height: 300px; margin-top:0px;"></div>
<div id="graph2" style="float:right; width: 50%; height: 300px; margin-top:0px;"></div>
</div>

	
</body>
</html>
