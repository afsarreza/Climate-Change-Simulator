<!DOCTYPE html>

<html lang="en-US" style="height:100%;">


<head>
	<title>CS-TASK</title>
	<meta name="keywords" content="" >
	<meta name="description" content="" >
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0"> 
  <!--	<link href="css/font-awesome.min.css" rel="stylesheet" type="text/css"> -->
	<link href="bootstrap.min.css" rel="stylesheet" type="text/css">
	<!--<link href="css/bootstrap-theme.min.css" rel="stylesheet" type="text/css">-->
	<link href="css/templatemo_style.css" rel="stylesheet" type="text/css">	 
  <link href="instruction_style.css" rel="stylesheet" type="text/css">
</head>

<body style="min-height:800px;" background="background1.jpg" onload="init()" >
	<!--<div id="header">-->
  <div id="header">
  
     
        
         <h1 >CO<SUB>2</SUB> Stablization Task</h1>
              <!--<ul class="nav nav-pills"> 
                    <li> <a href = "index.html" >HOME</a> </li>
                    <li> <a href = "contact.html" >CONTACT US</a> </li>
                    <li> <a href = "about.html" >ABOUT</a> </li>
                  </ul>  -->          
  </div>  
<div id="left-body1">

</div>        

<div id="center-body-above">

<div id="center-body-above-above">

<div id="center-body-above-above-left">
   <img src="axis.png" alt="Smiley face" height="200" width="15" >
</div>

<div id="center-body-above-above-right">
  <img src="cstask3.png" alt="Smiley face" height="200" width="200" >
    <h2 style="
                transform: rotate(-90deg);
                -webkit-transform: rotate(-90deg);
                -moz-transform: rotate(-90deg);
                -ms-transform: rotate(-90deg);
                position:relative;
                font-size: 90%;
               top:-100px;
                left: -100px;
                display:inline-block;"> Atmospheric CO<SUB>2</SUB> (GtC)</h2>
</div>
</div>

<div id="center-body-above-below">
  <img src="axis (copy).png" alt="Smiley face" height="15" width="210" >
</div>
</div>

<div id="center-body-below">
<div id="center-body-below-above">

<div id="center-body-below-above-left">
   <img src="axis.png" alt="Smiley face" height="220" width="15" >
</div>

<div id="center-body-below-above-right">
     <h2 style="
                transform: rotate(-90deg);
                -webkit-transform: rotate(-90deg);
                -moz-transform: rotate(-90deg);
                -ms-transform: rotate(-90deg);
                position:relative;
                font-size: 90%;
               top:130px;
                left: -160px;
                display:inline-block;"> Anthropogenic Total CO2 Emissions(GtC/Year)</h2>
                <canvas id="canvas" width="200" height="200" style="cursor:pointer;border:2px solid blue;"></canvas> 
    <!-- <img src="axis (copy).png" alt="Smiley face" height="15" width="210" style="top:" > -->
    
</div>
</div>

<div id="center-body-below-below">
  <img src="axis (copy).png" alt="Smiley face" height="15" width="215" >
  <h2 style="margin-left:-70px">Year </h2>
</div>



</div>  
<p style="margin-left:550px;color: #660033" id="mouse">Coordinates </p>

<label style=" margin-left:535px">
Explain clearly the procedure by which you went about drawing the </br> future CO2 absorptions and future anthropogenic CO2 emissions,</br> 
for the scenario given above?</br>
<textarea id="proc" cols="50" rows="5"></textarea>
</label>

<button style="margin-left:680px" id="demo">Submit</button>

</div>

<div id="right-body1">
  
</div>
    

<script src="jquery.min.js"></script>

<script>


    
</script>


<script>

  $(document).ready(function() {

  $("#demo").click(function(){
   
      //var array = $(this).attr('array');
      var feedback = $("#proc").val();
    // var procedure = document.getElementById("proc").value;    
      //alert("hello");
       $.ajax({
          type:"post",
            url:"sendpoints.php",
          data:"arrayex="+arrex+"&arrayey="+arrey+"&arrayax="+arrax+"&arrayay="+arrey+"&feedback="+feedback, 
           success: function(data){
      $('#answer').html(data);
    }
        });
        location.reload();
        alert("Thank you , Your Response has been recieved");

      });
}); 


var canvas, ctx, flag = false,
    prevX = 0,
    currX = 0,
    prevY = 0,
    currY = 0,
    dot_flag = false;

var x = "green",
    y = 2;
var w,h;
var ptsemissionx = [];
var ptsemissiony = [];
var ptsabsx = [];
var ptsabsy = [];

var arrex = "" ;
var arrey = "" ;
var arrax = "" ;
var array = "" ;


var pointsy = [1.2609,1.3448,1.3628,1.4429,1.4764,1.5415,1.6165,1.7026,1.6779,1.7203,1.76,1.6131,1.631,1.6548,1.6597,1.6941,1.6961,1.7189,1.7252,1.7374,1.7408,1.7532,1.7589,1.7778,1.8206,1.8257,1.827,1.8406,1.8535,1.8883,1.9407,1.9687,1.9717,1.978,2.0444,2.052,2.0541,2.0711,2.085,2.0925,2.1083,2.1865,2.2042,2.2149,2.2333,2.2753,2.2774,2.4009,2.4439,2.4848,2.6673,3.0263,3.0807,3.1219,3.2,3.4225,3.6169,3.7391,3.8508,3.8598,3.9628,4.0579,4.16,4.3229,4.4951,4.65,4.8443,4.9568,5.0657,5.2831,5.5157,5.5227,5.6632,5.8601,5.8837,5.8985,6.1949,6.3441,6.4169,6.4314,6.5719,6.59,6.6229,6.6708,6.8501,7.0272,7.2111,7.3641,7.6025,7.736,7.7488,7.752,7.8077,7.8535,7.9616,7.9645,8.0222,8.0563,8.0782,8.1243,8.1549];

var pointsx = [1900,1901,1902,1903,1904,1905,1906,1907,1908,1909,1910,1911,1912,1913,1914,1915,1916,1917,1918,1919,
1920,1921,1922,1923,1924,1925,1926,1927,1928,1929,1930,1931,1932,1933,1934,1935,1936,1937,1938,1939,
1940,1941,1942,1943,1944,1945,1946,1947,1948,1949,1950,1951,1952,1953,1954,1955,1956,1957,1958,1959,
1960,1961,1962,1963,1964,1965,1966,1967,1968,1969,1970,1971,1972,1973,1974,1975,1976,1977,1978,1979,
1980,1981,1982,1983,1984,1985,1986,1987,1988,1989,1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2000]; 


  
    
      // $("showPoints").onchange = $("showControlLines").onchange = $("tension").onchange = update;

      // utility function
//      function $(id){ return document.getElementById(id); }

      
     var canvas=document.getElementById("canvas"), ctx=canvas.getContext("2d");
     

      var procedure;
   

//      function setCanvasSize() {
  //      canvas.width = parseInt(window.getComputedStyle(document.body).width);
    //    canvas.height = parseInt(window.getComputedStyle(document.body).height);
      //}
     // window.onload = window.onresize = setCanvasSize(); 


function init() 
{
  
    w =parseInt(canvas.width);
    h =parseInt(canvas.height);

    //canvas.width = parseInt(window.getComputedStyle(document.body).width);
    //canvas.height = parseInt(window.getComputedStyle(document.body).height);
    //ctx.translate(0, canvas.height);
    //ctx.scale(1, -1);
    
    canvas.addEventListener("mousemove", function (e) {
        findxy('move', e)
    }, false);
    canvas.addEventListener("mousedown", function (e) {
        findxy('down', e)
    }, false);
    canvas.addEventListener("mouseup", function (e) {
        findxy('up', e)
    }, false);
    canvas.addEventListener("mouseout", function (e) {
        findxy('out', e)
    }, false);x
makeinitialcurve();

}
   console.log(procedure);


 


function makeinitialcurve()
{
  var inc = 0;
  for (var i = 0; i < 100; i++)
  {
    ctx.beginPath();
    ctx.moveTo((pointsx[i]-1900), (h-pointsy[i]*12.50));
    ctx.lineTo((pointsx[i+1]-1900), (h-pointsy[i+1]*12.50));
    ctx.strokeStyle = x;
    ctx.lineWidth = y;
    ctx.stroke();
    ctx.closePath(); 
  }
  ctx.strokeStyle = "blue" ;
  ctx.fillRect(100,150,5,5);

}












/*  for (var i = 0; i <= 15; i++) {
    
    inc = inc + 12.5;
     ctx.fillRect(0,inc,2,1.5);
  }
inc =0;
   for (var i = 0; i <20; i++) {
    
    inc = inc + 10 ;
     ctx.fillRect(inc,h-1.5,2,1.5);
  }*/





    function draw() 
{
    ctx.beginPath();
    ctx.moveTo(prevX, prevY);
    ctx.lineTo(currX, currY);
    ctx.strokeStyle = x;
    ctx.lineWidth = y;
    ctx.stroke();
    ctx.closePath();
}


function findxy(res, e) {
    if (res == 'down') {
          prevX = currX;
        prevY = currY;
        currX = e.clientX - canvas.offsetLeft;
        currY = e.clientY - canvas.offsetTop;

        flag = true;
        dot_flag = true;
        if (dot_flag) {
            ctx.beginPath();
            ctx.fillStyle = x;
            ctx.fillRect(currX, currY, 2, 2);
            ctx.closePath();
            dot_flag = false;
        }
    }
    if (res == 'up' || res == "out") {
        flag = false;
    }
    if (res == 'move') {
        if (flag) {
            prevX = currX;
            prevY = currY;
            currX = e.clientX - canvas.offsetLeft;
            currY = e.clientY - canvas.offsetTop;
            draw();
        }
    }
}


      function mousePositionOnCanvas(e) {
        var el=e.target, c=el;
        var scaleX = c.width/c.offsetWidth || 1;
        var scaleY = c.height/c.offsetHeight || 1;
        if (!isNaN(e.offsetX))  
          return { x:e.offsetX*scaleX, y:(h-e.offsetY*scaleY) };

        var x=e.pageX, y=e.pageY;
        do {
         x += el.offsetLeft;
          y += el.offsetTop;
          el = el.offsetParent;
        } while (el);
        return { x:parseInt(x*scaleX), y: parseInt(h-y*scaleY) };
      }


   

var start = 0 ;
var ready = 1 ;

      canvas.onmousedown = function(e){
      
        if(start==0) start = 1;
        if (start==2) {if(ready==1) ready = 2;}
        
        //if (start) start = false;
       };


      canvas.onmouseup = function(e){
      
        if(start == 1) start = 2;
       if(ready ==2) ready = 3;
       };


     

   
      canvas.onmousemove = function(e) {
        if (start==1) {
          var p = mousePositionOnCanvas(e);

          ptsemissionx.push(parseInt((p.x)+1900));
          ptsemissiony.push(parseInt(p.y)/12.5);

          arrex = ptsemissionx + "" ; 
          arrey = ptsemissiony + "" ;  
        } 

        if (ready==2) {
          var q = mousePositionOnCanvas(e); 
          
          ptsabsx.push(parseInt((q.x)+1900));
          ptsabsy.push(parseInt(q.y)/12.5);

          arrax = ptsabsx + "" ;
          array = ptsabsy + "" ;
         }
        var p = mousePositionOnCanvas(e);
        document.getElementById("mouse").innerHTML ="Coordinates:"+"  "+"("+"X:"+" "+(parseInt((p.x)+1900))+","+"Y:"+" "+(parseInt(p.y)/12.5)+")  ";
        
      };

</script>

  
    </body>
</html>